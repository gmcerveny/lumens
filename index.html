<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Stellar Test Stream</title>
  <meta name="description" content="Stellar Test">
  <meta name="author" content="Greg Cerveny">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.js"></script>
  <script src="./sketch.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/stellar-sdk/0.8.0/stellar-sdk.min.js"></script>
  <script>
    var server = new StellarSdk.Server('https://horizon.stellar.org');

    // Get a message any time a payment occurs. Cursor is set to "now" to be notified
    // of payments happening starting from when this script runs (as opposed to from
    // the beginning of time).
    var es = server.payments()
      .cursor('now')
      .stream({
        onmessage: function (message) {
          if (message.type == "payment") {
            gotPayment(message.from, message.to, message.amount)
          } else {
            console.log(message.type, message);  
          }
        }
      })

  </script>

</head>

<body>
  <h1>Test Stream</h1>

</body>

</html>